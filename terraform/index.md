# Terraform

## Iac

Iac는 Infrastructure as Code의 약자로 코드 기반으로 인프라를 관리한다는 개념으로, HCL을 사용해 클라우드 리소스를 선언한다. 즉 인프라를 코드로 사용하여 버전 관리 및 공유/재사용을 가능하게한다.

Iac는 영역별로 Provisioning Tool과 SCM Tool로 나누어진다.

1.  Provisioning Tool

    운영팀의 담당자가 컴퓨터나 가상 호스트를 사용해 개발팀에서 필요한 라이브러리나 서비스를 설치하는 것으로, 프로비저닝 영역에서는 개발팀이 사용한 코드 버전과 동일한 버전을 사용해 네트워크, VM, DB 등을 구성 가능하다.

    ex) Terraform, Cloudformation

2.  SCM Tool

    구성 관리는 성능부터 H/W 속성과 라이프사이클에 걸친 요구사항, 설계 및 운영 정보의 일관성등을 설정하고 유지하기 위한 시스템 프로세스로, 프로비저닝이 인프라에 대한 배포 위주라면, 구성관리는 어플리케이션의 구성 관리의 영역이다.

    ex) Chef, Puppet, Ansible

## Terraform

테라폼은 Hasicorp에서 오픈 소스로 개발 중인 인프라 자동화를 지향하는 코드로 Iac의 일종이다.

<img src="https://github.com/user-attachments/assets/c49c3c4e-190c-45fa-95f4-d43ead2a0b8d" width=600>

장점

- 자동화

  수동으로 서버를 생성하는 게 아닌 코드로 생성하기에 서버 운영 및 관리를 모두 자동화 처리 가능하다.

- 속도 & 안전

  수동으로 작업하는 것보다 빠른 속도로 관리 가능하며, 사람이 직접할 때 생길 수 있는 실수를 방지 가능하다.

- 문서화

  모든 코드가 기록 및 관리 되기에 자동으로 문서화가 되기에 회사 인프라에 대한 구성의 이해도가 쉬어진다.

- 형상 관리

  Git을 통해 형상 관리가 가능하여, 인프라 변경 기록을 쉽게 볼 수 있다.

### 테라폼의 기본 구성

프로비저닝

어떤 프로세스나 서비스를 실행하기 위한 준비 단계로 네트워크나 컴퓨팅 리소스를 준비하는 작업

<br />

프로바이더

테라폼과 외부 서비스를 연결하는 기능으로, AWS, GCP와 같은 범용 클라우드 뿐만 아니라 Github, Datadog과 같이 특정 기능을 제공하는 서비스도 포함이다.

<br />

리소스

프로바이더가 제공해주는 조작 가능한 대상의 최소 단위로 AWS의 프로바이더는 aws_instance 리소스 타입을 제공하여 이를 사용해 EC2 가상 머신 리소스를 선언하고 조작하는 것이 가능하다.

<br />

계획

테라폼 프로젝트 디렉터리 아래의 모든 .tf 파일 내용이 실제로 적용 가능한 지 확인하는 작업이다.

<br />

적용

테라폼 프로젝트 디렉터리 아래의 모든 .tf 파일 내용대로 리소스를 생성, 수정, 삭제하는 일을 적용한다.
