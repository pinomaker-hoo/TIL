# Typescript

## 개요

이 글은 따라하면서 배우는 AWS 네트워크 입문을 읽고 정리한 내용 입니다.

[따라하며 배우는 AWS 네트워크 입문 - 김원일, 서종호](https://www.yes24.com/Product/Goods/93887402)

<br />

## 목차

- [1. AWS의 기초](#1-aws-클라우드)
- [2. VPC 기초](#2-vpc의-기초)
- [3. VPC 고급](#3-vpc의-고급)
- [4. 부하분산](#4-부하분산)

  <br />

  <br />

## 1. AWS의 기초

<br />

### (1) 클라우드

<br />

클라우드는 인터넷을 통하여 언제 어디서든 원하는 IT 리소스를 쉽게 사용하게 하는 서비스를 의미한다.

업체 마다 다르지만 AWS의 클라우드에는 IaaS, PaaS, Serverless, SaaS의 4가지 종류가 있다.

1. IaaS(Infrastructure as a Service)

   가장 기본적인 IT 자원인 서버, 네트워크, 스토리지 자원을 사업자가 제공하고 운영 관리를 하게되며, 사용자는 가상 서버에 필요한 프로그램을 설치하여 운영 관리를 한다.

   관련 서비스로는 EC2, VPC, EBS가 있다.

2. PaaS(Platform as a Service)

   사업자가 IT 자원이외에 운영체제와 개발에 필요한 미들웨어나 런타임을 제공하며 사용자는 미들웨어와 런타임 환경에서 개발에 집중하여 사용하낟.

   관련 서비스로는 AWS Elastic Beanstalk가 있다.

3. Serverless
   어플리케이션 개발에 필요한 대부분의 기능을 클라우드 사업자가 제공하고, 운영 관리를 한다. 사용자는 개발에만 집중한다.

   관련 서비스로는 Lambda와 API Gateway가 있다.

4. SaaS(Software as a Service)
   SaaS 서비스 개발을 원할하게 할 수 있는 리소스 및 다양한 지원을 제공해준다.

클라우드는 퍼블릭, 프라이빗, 하이브리드로 구성이 가능하다. 퍼블릭은 클라우드 제공 업체가 운영 관리하며 사용자가 리소스를 사용하며 프라이빗은 자신의 온프레미스에 클라우드 플랫폼을 구축하여 직접 사용하고 하이브리드는 2개 모두에 서비스하는 것이다.

<br />

### (1) AWS 클라우드

<br />

AWS는 전세계에 분포한 데이터 센서에서 다양한 서비스를 제공하고 있으며, 인프라와 논리적인 규모에 따라서 데이터센터, 가용 영역, 리전, 글로벌 인프라로 구분하여 사용한다.

<br />

1. 데이터센터

   데이터 센터는 건물을 운영하는 설비와 시스템인 물리영역, 서버와 네트워크 등의 일반적인 IT 인프라 디바이스인, IT 인프라 영역과 데이터센터를 운영 유지하는 운영 영역으로 구분한다.

2. 가용 영역

   가용 영역은 1개 이상의 데이터 센터들의 모음으로 각 데이터센터는 분산되어 있고 초고속 광통신 전용망으로 연결되어있다.

3. 리전

   리전은 지리적인 영역 내에서 격리되고 물리적으로 분리된 여러 개의 가용 영역의 모음이며, 최소 2개에서 6개의 가용 영역으로 구성된다.

4. 엣지

   엣지는 외부 인터넷과 AWS 글로벌 네트워크망과 연결하는 별도의 센터로 엣지는 엣지 로케이션과 리전별 엣지 캐시로 구성되며 CDN 서비스의 캐시 기능을 제공한다.

   백본 네트워크는 AWS 글로벌 네트워크망과 연결을 하며 중국 리젠을 제외하고 모든 AWS 리젠과 연결된다.

<br />

## 2. VPC의 기초

<br />

### (1) VPC

<br />

VPC는 Virtual Private Cloud의 약자로 AWS 내에서 논리적으로 독립된 섹션을 제공하여 사용자가 정의한 가상의 네트워크상에서 AWS 리소스를 실행할 수 있게 지원한다. 독립된 가상의 클라우드 네트워크다.

VPC는 확장성, 보안, 사용자 중심, 제약 사항등의 특징을 가진다.

1. 확장성

   클라우드 기반의 손쉽게 VPC 자원을 생성하고 삭제가 가능하며 설정 및 관리에 편의성을 제공한다.

2. 보안

   인스턴스 레벨과 서브넷 레벨에서 인바운드 및 아웃바운드 필터링을 수행할 수 있도록 보안그룹과 네트워크 ACL을 제공하여 보안을 강화할 수 있다.

3. 사용자 중심

   VPC 내 리소스에 대해 사용자가 원하는 대로 손쉽게 제어할 수 있으며 네트워크 지표 및 모니터링 툴을 활용해 사용자에게 높은 가시성을 제공한다.

4. 제약 사항

   전통적인 네트워크 환경에서 사용 가능했던 기능이 제한되어 있거나 일부만 사용 가능하여 기술적 제약이 따르게 된다.

<br />

### (2) 네트워크 개념 이해

<br />

OSI 7 레이어 모델은 ISO에서 개발한 모델로 복잡한 네트워크 동작 과정을 7개의 계층으로 나누어 네트워크 통신 흐름을 한눈에 알아보고 이해할 수 있게 도와주는 역할을한다.

계층별로 하위 계층의 기능을 이용하고 상위 계층으로 기능을 제공하는 상하관계를 맺고 있다.

<br />

![image](https://github.com/pinomaker-hoo/TIL/assets/56928532/115d29f6-0d0f-4520-83d2-22db664b6b98)

1. 1 Layer - Physical 계층

   Physical 계층은 물리 계층으로 네트워크의 하드웨어 전송 기술을 말하며, 물리적인 링크의 연결 해제를 담당한다.

2. 2 Layer - Data Link 계층

   Data Link 계층은 Physical 계층에서 송수신되는 정보의 오류와 흐름을 관리하여 데이터의 전달을 수행한다.

   OSI 1계층과 2계층을 TCP/IP 프로토콜 상 Network Interface 계층으로 분류하며 해당 계층에는 Ethernet, Wi-Fi, 물리적인 케이블 등이 포함된다.

3. 3 Layer - Network 계층

   Network 계층의 핵심은 데이터를 목적지까지 빠르고 안전하게 전달하기 위한 것으로 여러 노드를 거칠 때 마다 최적의 경로를 찾아주는 역할을 한다.

   OSI 3계층을 TCP/IP 프로토콜 상 Internet 계층으로 분류하며 IP, ARP, ICMP 등의 프토토콜이 포함된다.

4. 4 Layer - Transport 계층

   Transport 계층은 전송 계층으로 종단의 사용자 간 데이터를 통신을 다루는 최상위 계층으로 데이터 전달의 유효성과 효율성을 보장 받는다.

5. 5 Layer - Session 계층

   Session 계층은 종단 사용자 간의 응용 프로세스 통신을 관리하기 위한 방법을 제공하며, 데이터 통신을 위한 논리적인 연결을 의미한다.

6. 6 Layer - Presentation 계층

   Presentation 계층은 데이터의 형식상 차이에 대해 송/수신자간 이해할 수 있는 형태로 데이터를 표현하는 기능을 담당하며 데이터의 암호화 및 압축 등을 수행한다.

7. 7 Layer - Application 계층

   Application 계층은 응용 프로세스와 직접 연계하여 실제 응용 프로그램을 사용하는 계층으로 OSI 5 - 7 계층을 TCP/IP 프로토콜상 Application 계층으로 분류하며 HTTp, SSH, FTP, DHCP 등이 포함된다.

<br />

### (3) IP와 서브넷 마스크

<br />

IP는 Internet Protocol의 약자로 인터넷상의 네트워크 자원을 구분하는 고유한 주소다. IP는 OSI의 3계층에 해당되며 IP는 버전에 따라 IPV4, IPV6로 구분한다.

네트워크는 용도에 따라서 퍼블릭 네트워크와 프라이빗 네트워크로로 구분을 지을 수 있고, 퍼블릭은 실제 인터넷 구간으로 통신하는 공공 네트워크이고, 프라이빗 네트워크는 인터넷 구간이 아닌 내부적으로 통신하는 사설 네트워크다.

Public IP는 인터넷 구간의 통신 대상을 식별하기 위하여 ISP에서 제공하는 IP 주소이며, 전세계의 인터넷 구간에서 유일한 주소를 가진다.

Private IP는 독립된 네트워크에서 사용하는 내부 IP로 해당 프라이빗 IP는 프라이빗 네트워크 관리자에 의하여 할당되며 독립된 네트워크상에서 유일한 주소를 갖는다. 그리고 프라이빗 IP 주소를 통해 인터넷 구간과 통신이 불가능하다.

또한 프라이빗 네트워크는 3가지 대역으로 고정되어있다.

- Class A : 10.0.0.0 - 10.255.255.255
- Class B : 172.16.0.0 - 172.31.255.255
- Class C : 192.168.0.0 - 192.168.255.255

<br />

서브넷은 부분적인 네트워크를 의미하며,모든 네트워크망이 거대한 하나의 망으로 이루어진 형태가 아니고 네트워크망에서 서브넷을 통해 부분적인 네트워크망으로 나누어져 서로 연결되어있다.

사설 네트워크 A와 사설 네트워크 B는 서르 다른 네트워크로 나누어져 있다는 것은 서로 간에 서브넷으로 분리된 부분 네트워크라는 의미다.

이렇게 나누어진 서브넷들은 서브넷 마스크를 이용하여 구분한다. 서브넷 마스크는 IP 주소에 네트워크ID와 호스트 ID를 구분하는 기준 값이다. 네트워크 ID는 서브넷을 식별하는 영역이고, 호스트 ID는 서브넷에서 대상을 식별한다.

즉 동일한 서브넷에 속한 IP 주소의 네트워크 ID는 모두 같고 호스트 ID를 통해 개별 구분한다.

<br />

### (4) TCP와 UDP

<br />

TCP와 UDP는 OSI 4계층에 사용되는 전송 프로토콜로 신뢰성 있는 전송의 여부에 따라서 차이를 두고 있다.

TCP는 종단 간의 연결을 맺고 연결이 이루어지면 신뢰성 있는 전송을 보장하기에 상대적으로 UDP보다 느린 통신이 이루어지며 대표적으로는 HTTP, SSH, FTP 등의 서비스가 있다.

UDP는 종당 간의 연결이 없이 통신이 이루어지기에 신뢰성 있는 전송을 보장 받지는 못 하지만 제어를 위한 작업이 없어 비교적 빠르다. 대표적으로는 DNS와 DHCP가 있다.

<br />

### (4) DHCP와 DNS

<br />

DHCP는 동적으로 IPV4 주소를 일정 기간 임대를 하는 프로토콜로, UDP 프로토콜을 사용하며 포트는 67, 68를 사용하여 동작한다. 네트워크상 호스트가 IPV4를 할당 할 때 수동으로 할 수도 있고 DHCP를 통해 자동으로 지정할 수 있다.

IP 주소를 임대하는 개념하에 임대 시간이 존재하며 임대 시간이 지날 경우 반환하거나 갱신한다. DHCP는 중앙집중형 서버/클라이언트 방식으로 동작한다. DHCP 서버가 동작하고 네트워크 호스트가 클라이언트가 되어 서버에게 IP 할당을 요청한다.

DNS는 도메인을 제공하기 위한 서비스로 도메인이란 IP 주소의 복잡한 주소 체계를 해소하기 위해 문자 형태로 구성된 이름이다. 기존의 3.32.31.54라는 IP를 가진 서비스를 사용자가 직접 저 주소를 입력하기엔 어려우니 www.google.com와 같은 이름을 만들어 사용하는 기술이며, UDP 프로토콜을 사용하고 53번 포트에서 작동한다.

라우팅이란 네트워크 통신을 수행할 때 거쳐 가는 경로를 잡아주는 OSI 7 Layer에서 3계층의 Network 계층의 핵심적인 기능을 수행한다.

네트워크는 여러 개의 서브넷으로 이루어져 목적지 IP로 향할 때 여러 노드를 거쳐서 통신을 하는 데 이 때 복잡하게 연결된 망에서 최적의 경로를 잡아 통신하는 역할을한다.

<br />

### (5) 서브넷(Subnet)

<br />

서브넷은 네트워크 영역을 부분적으로 나눈 망으로 정의할 수 있으며, 클라우드 환경의 VPC에서도 서브넷을 통해 네트워크를 분리하여 나눌 수 있다.

서브넷의 IP 대역은 VPC의 IP 대역에 속해야하며 서브넷은 1개의 가용 영역에 종속되어야한다. AWS에서는 서브넷에게 할당 할 수 있는 IP 대역에서 미리 예약되어 있는 IP주소가 있다. 이런 주소는 AWS 자원에게 할당할 수 없다.

서브넷은 퍼블릭과 프라이빗으로 구분된다. 퍼블릭 서브넷은 공인 네트워크 개념으로 외부 인터넷 구간과 직접 통신할 수 있는 공공 네트워크이지만 프라이빗은 사설 네트워크이기에 외부 인터넷 구간과 통신을 할 수 없다.

따라서 퍼블릭 서브넷은 퍼블릭 IP를 가지기에 인터넷 게이트웨이를 통하여 외부 인터넷 구간의 사용자와 통신이 가능하지만 프라이빗은 프라이빗 IP만 가지기에 불가능하다.

<br />

### (6) 가상 라우터

<br />

VPC를 생성하면 자동으로 가상 라우터가 생성된다. 가상 라우터는 최초에는 기본 라우팅 테이블을 보유하고 있으며 로컬 네트워크에 대한 경로만 잡혀있다.

가상 라우터에서는 서브넷별로 라우팅 테이블을 매핑시켜 사용할 수 있다. 기존의 라우팅 테이블을 사용할 수도 있고 서브넷 별로 개별적인 라우팅 테이블을 생성해 사용할 수도 있다.

<br />

### (7) 인터넷 게이트웨이, Nat 게이트웨이

<br />

인터넷 게이트웨이는 VPC와 인터넷 간의 논리적인 연결이다. 쉽게 말해 VPC에서 인터넷으로 나가기위한 관문이다. 인터넷 게이트웨이는 VPC 당 1개만 연결이 가능하고 인터넷 게이트웨이를 통해 외부 인터넷 구간으로 통신할 수 있는 것은 퍼블릭 서브넷 뿐이다. 이 때 퍼블릭 서브넷은 자신의 라우팅 테이블에 외부 인터넷으로 나가는 타깃을 인터넷 게이트웨이로 지정해야한다.

인터넷 게이트웨이는 양방향을 지원하기에 외부 인터넷 구간에서 퍼블릭 서브넷의 퍼블릭 IP로도 정상적인 통신이 가능하다.

Nat 게이트웨이는 인터넷 게이트웨이와 같은 외부 인터넷으로 나가는 관문 역할을 하지만 차이는 IP 주소를 변환해주는 것에 있다. 인터넷 구간은 퍼블릭 IP를 통해 통신이 이루어지기에 프라이빗 IP로는 불가능하다. 이 떄 Nat 게이트웨이는 프라이빗 IP를 퍼블릭으로 변경하여 통신을 돕는다.

Nat 게이트웨이를 이용하면 프라이빗 서브넷도 외부 인터넷과 연결이 가능하다. 다만 단방향으로만 동작하기에 서브넷에서 외부로 가는 통신은 가능하지만 반대로 외부에서 서브넷으로 가는 것은 불가능하다.

<br />

### (8) 보안그룹과 네트워크 ACL

<br />

VPC는 인스턴스 레벨과 서브넷 레벨 상에서 대상을 필터링 할 수 있는 보안 기술을 사용할 수 있다. 인스턴스 레벨에서의 보안 기술은 보안그룹이고, 서브넷 레벨에서는 ACL이다.

보안그룹과 ACL은 인바운드와 아웃바운드에 대한 규칙을 수립하여 필터링 할 수 있다.

<br />

## 3. VPC의 고급

<br />

### (1) VPC 엔드포인트

<br />

사용자가 생성한 VPC에서 AWS 퍼블릭 서비스와 통신을 하거나 다른 VPC로 통신이 필요할 경우에는 보통 퍼블릭 네트워크를 이용합니다.

AWS 제공하는 서비스에 접근하기 위해서는 대부분 퍼블릭 네트워크 통신이 필요하지만 금융 서비스와 같이 강력한 보안 요건을 만족하기 위해서는 격리된 프라이빗 서브넷에 자원이 생성되어야하기에 퍼블릭 네트워크 통신이 불가능하다.

이에 프라이빗 서브넷에서도 AWS 퍼블릭 서비스와 프라이빗 네트워크 통신을 이용하여 안전한 통신을 제공하는 것이 VPC 엔드포인트다.

VPC 엔드포인트는 AWS 퍼블릭 서비스나 생성한 AWS 서비스에 대해 외부 인터넷 접근 구간을 통한 접근이 아닌 직접적으로 접근할 수 있는 프라이빗 엑세스 기능이다.

S3에 내가 생성한 VPC가 접근하기 위해 인터넷 게이트웨이나 Nat 게이트웨이를 쓰는 것이 아닌 엔드포인트를 활용할 수 있다.

VPC 엔드포인트는 연결 대상 서비스에 따라서 엔드포인트와 엔드포인트 서비스로 구분하고 엔드포인트는 추가로 연결 대상 서비스에 따라서 게이트웨이 엔드포인트와 인터페이스 엔드포인트로 나누어진다.

<br />

![image](https://github.com/pinomaker-hoo/TIL/assets/56928532/64eb2372-2aef-4547-a11e-74d81d3a885a)

<br />

엔드포인트는 보안 강화, 서비스 제약, VPC 종속, 권한 제어의 특징이 있다.

1. 보안 측면 강화

   프라이빗 연결을 통하여 외부 구간으로 노출이 되지 않는다.

2. 서비스 제약

   연결 대상 서비스는 동일 리전에 속해야한다.

3. VPC 종속

   VPC 하나에만 연결할 수 있다.

4. 권한 제어

   AWS IAM 기능으로 정책을 수립해 권한 부여가 가능하다.

<br />

### (2) 배치그룹

<br />

새로운 인스턴스가 생성되면 AWS에서는 하드웨어에 최대한 분산하여 배치한다. 그 이유는 물리 호스트 장애에 대해 상호 간의 영향을 최소화하고 장애를 줄이는 것에 이점이 크기 때문이다. 하지만 무조건 인스턴스의 배치 위치를 멀리하는 것이 아닌 조정하는 것이 유리한 경우가 있고 이에 배치그룹을 이용하여 배치를 조정할 수 있다.

```
워크로드
클라우드 리소스에서 실행할 수 있는 특정한 애플리케이션, 서비스 또는 특정한 작업량으로 가상 머신, 데이터베이스, 컨테이너 등 모두 워크로다.
```

배치그룹은 워크로드 형태에 따라 클러스터 배치그룹, 파티션 배치그룹, 분산형 배치그룹 총 3가지 전략의 배치그룹이 있다.

1. 클러스터 배치 그룹

   클러스터 배치그룹은 인스턴스의 하드웨어 배치를 서로 근접하게 위치한다. 일반적으로는 고성능 컴퓨팅 환경에서는 수많은 프로그램이 서로 긴밀한 통신을 요구하기에 낮은 지연 시간과 높은 네트워크 성능이 필요하다. 클러스터 배치그룹은 하나의 가용영역에 종속되는 제약이 있어 그룹 내 동일한 인스턴스 유형을 사용하는 것을 권장한다.

   <br />

   ![image](https://github.com/pinomaker-hoo/TIL/assets/56928532/a45915aa-cd6c-457f-8a54-36bd7269fd2e)

   <br />

2. 파티션 배치 그룹

   파티션 배치 그룹은 인스턴스를 논리적인 세그먼트 분산하며 하나의 파티션에 존재하는 인스턴스는 다른 파티션의 인스턴스와 하드웨어를 공유하지 않아 상호 영향을 미치지 않는다. 파티션 배치 그룹은 가용 영역당 파티션을 최대 7개까지 가질 수 있고 파티션 배치 그룹에서 실행할 수 있는 인스턴스 숫자는 계정 제한의 적용을 받는다.

   <br />

   ![image](https://github.com/pinomaker-hoo/TIL/assets/56928532/4f713380-639f-4cec-9582-d1619063fc52)

   <br />

3. 분산형 배치 그룹

   분산형 인스턴스 그룹은 서로 다른 하드웨어로 분산하여 배치해 인스턴스 간의 상호 장애 영향도를 최소화하는 방법이다. 보통 중요한 어플리케이션의 고가용성을 보장 받기 위해 사용한다. 분산형 배치 그룹은 각각 고유한 렉에 배치된 인스턴스 그룹이며 렉 마다 자체 네트워크 및 전원이 있다.

   <br />

   ![image](https://github.com/pinomaker-hoo/TIL/assets/56928532/a8ce73bd-b1a9-4101-a708-99885f9052d5)

   <br />

 <br />

## 4. 부하분산

<br />

### (1) ELB, Elastic Load Balancing

<br />

우리의 서비스를 아래와 같이 단일 서버로 구성하게 된다면 그 단일 서버에 장애가 발생하면 사용자는 서비스를 이용할 수 없는 치명적인 단점이 존재한다.

![스크린샷 2023-07-03 오후 10 02 13](https://github.com/pinomaker-hoo/TIL/assets/56928532/2cd03298-0127-4196-9cca-f2dfb90aa012)

<br />

그러기에 지속적인 서비스 제공을 위해서는 서버를 다중화하며 연속성을 보장하는 고가용성 구성이 필요하다. 그렇게 되면 하나의 서버에 장애가 발생하더라도 사용자는 나머지 서버로부터 서비스를 제공 받을 수 있다.

![스크린샷 2023-07-03 오후 10 03 33](https://github.com/pinomaker-hoo/TIL/assets/56928532/d3132323-1d14-4c50-b961-d116e8af433f)

<br />

하지만 인스턴스 3개에 대하여 서비스 타깃을 사용자 입장에서 일일이 지정을 해줘야한다는 문제가 존재하며, 사용자는 장애를 인지하여 타깃을 변경하기 전까지는 서비스를 받을 수 없을 것이기에 이러한 환경은 고가용성 구성이라고 말할 수 없다.

부하 분산 기술 로드밸런서는 이러한 문제를 서버의 상태를 파악하고 데이터를 분산하여 전달하는 접점 역할을 수행해 해결할 수 있다.

<br />

![스크린샷 2023-07-03 오후 10 07 52](https://github.com/pinomaker-hoo/TIL/assets/56928532/3e84ef83-0f5b-46ab-8718-1fc986a4986a)

<br />

ELB는 AWS에서 제공하는 로드밸런싱 기술로, 인스턴스의 상태를 파악하고 데이터를 분산하여 전달하는 접점 역할을 수행한다.

<br />

![스크린샷 2023-07-03 오후 10 14 40](https://github.com/pinomaker-hoo/TIL/assets/56928532/36416c75-8b65-47fa-aa6c-be93f6a62c0d)

로드밸런스는 위의 이미지와 같이 자신이 서비스하는 대상을 정의하는 리스너와 부하 분산 대상을 정의하는 대상그룹으로 이루어져있다.

1. 리스너

   리스너는 프로토콜 및 포트를 사용하여 연결 요청을 확인하는 프로세서로, 로드밸런서에서 사용하고자하는 프로토콜과 포트를 지정하는 규칙을 생성한다.

2. 대상그룹

   하나 이상의 대상을 라우팅하여 부하 분산을 하는 데 사용하며, 대상 그룹에 속한 대상에 대해 주기적으로 확인하는 프로세스를 통하여 상태 확인(Health Check)를 수행하여 정상적인 상태의 대상에게만 데이터를 전달한다.

AWS의 ELB에는 ALB, NLB, CLB의 3가지 종류의 로드밸런서가 있다.

1. ALB, Application Load Balaner

   ALB는 HTTP나 HTTPS와 같이 웹 어플리케이션에 대한 분산 처리를 제공하는 ELB다. 다른 로드밸런서에 비하여 처리 속도가 느릴 수는 있지만 HTTP(S)에 대하여 세부적이고 다양한 정책으로 라우팅을 할 수 있다.

   URL 경로 기반 라우팅, 호스트 기반 라우팅, HTTP 헤더 기반 라우팅 등 다양한 규칙을 생성하여 포워드, 리다이렉션, 지정 HTTP 응답 등의 작업을 수행할 수 있다. 또한 Lambda 함수를 호출할 수도 있다.

2. NLB, Network Load Balancer

   NLB는 TCP나 UDP 프로토콜에 대한 포트 정보를 정의하여 네트워크 분산 처리를 제공하는 로드밸런서다. OSI 4계층 레벨의 로드밸런서이기에 가장 빠른 처리 속도가 가능하며, 고정 IP나 탄력적 IP를 보유할 수 있고, VPC 엔드포인트 서비스로 연결하여 Private Link 구성이 가능하다.

3. CLB, Classic Load Balancer

   CLB는 VPC의 구 버전인 EC2-Classic에 대해 분산처리를 지원하는 이전 세대의 ELB다.

ELB는 퍼블릭 주소를 가지고 있기에 인터넷을 통해 요청을 로드밸런서에 등록된 EC2 인스턴스로 라우팅하는 인터넷 연결과 프라이빗 주소만 가지고 있어 로드밸런서를 위한 VPC 내부에 엑세서하여 등록된 EC@ 인스턴스 등 컴퓨터 자원으로 라우팅 하는 내부 통신이 가능하다.

ELB는 5가지의 특징을 가지고 있따.

- 고가용성 : ELB로 인입되는 트래픽을 다수의 대상으로 분산하여 고가용성을 유지한다.

- 상태 확인 : 대상 그룹에 대한 Keepalive를 통해 주기적으로 상태를 확인한다.

- 보안 기능 : 보안그룹을 적용하여 보안옵션을 부여할 수 있다.(NLB는 안 됨)

- 4계층/7계층의 로드밸런싱 : HTTP,HTTPS(7계층)의 어플리케이션을 로드밸런싱 하거나 TCP, UDP의 4계층 로드밸런싱을 사용할 수 있다.

- 운영모니터링 : ELB 어플리케이션 성능을 실시간으로 모니터링 가능하다.

  <br />

## 5. Route 53

<br />

### (1) DNS

네트워크 통신을 수행할 때 주요한 요소 중의 하나가 대상을 지정하는 주소다. 우리는 주소를 통하여 목적지 대상을 지정하고 출발지 대상을 알릴 수 있게 되며, 우리가 보편적으로 사용하는 주소 체계는 IP 주소 체계이다.

하지만 39.121.123.219와 같은 10진수 4자리로 이루어진 IPv4주소에 대해서는 사용자가 기억하고 접근하기는 어렵기에 이러한 불편함을 해소하기 위한 방법이 바로 DNS다. DNS는 주소 체계를 문자 형태의 도메인 네임으로 매핑하여 연결하는 서비스다.

즉 39.121.123.219와 같은 IP를 www.pinomaker.com와 같이 사용할 수 있게 도와주는 서비스다.

<br />
<hr />
<br />

DNS를 통하여 서비스를 수행할 경우에는 DNS 해석기, 루트 네임 서버, TLD 네임 서버, 권한 있는 네임 서버 4가지로 구성된다.

![image](https://github.com/pinomaker-hoo/TIL/assets/56928532/685b36cf-57be-43a5-8909-e7f26c6255aa)

1. DNS 해석기(DNS Resolver)

   클라이언트와 네임 서버의 중계자 역할을 하여, DNS 요청에 대해 네임 서버로 전달하며, DNS 응답을 클라이언트에게 전달한다.

2. 루트 네임 서버(Root Name Server)

   DNS 서버의 최상위 네임 서버로 DNS 해석부터 발생한 DNS 요청에 대해 적절한 TLD 네임 서버 정보를 반환한다.

3. TLD 네임 서버(Top Level Domain Name Server)

   .com, .net와 같은 최상위 도메인에 대한 네임 서버로 해당 영역에 포함되는 모든 도메인 이름의 정보를 유지한다. DNS 요청애 대해 TLD 네임 서버에서 권한 있는 네임 서버를 지정하여 반환한다.

4. 권한 있는 네임 서버(Authorittive Name Server)

   DNS 해석기가 TLD 네임 서버로부터 응답을 받으면 확인자는 해당 응답을 권한 있는 네임 서버로 보낸다. 일반적으로 권한 있는 네임 서버는 요청하는 도메인 주소에 대한 IP주소를 확인하는 마지막 단계다.

<br />
<hr />
<br />

도메인에 관한 설정을 하기 위해 사용되는 일련의 문자들을 DNS 레코드라고 통칭하며 아래와 같은 유형이 존재한다.

- A : IPv4 주소를 매핑
- AAAA : IPv6 주소를 매핑
- CNAME : 도메인 이름의 별칭을 만듦
- MX : 이메일 서버 지정
- NS : 도메인 네임 서버 식별
- SOA : 도메인 영역을 표시하는 역할
- SRA : 도메인 서비스 이용 가능 여부 식별
- TXT : 텍스트 식별

### (2) Route 53

Route53은 AWS에서 제공하는 관리형 DNS 서비스로, 사용자는 AWS 상의 Route 53을 통하여 도메인을 구매하고 구매한 도메인 주소에 대한 호스팅 영역을 생성하여 네임 서버를 구축하고 레코드를 생성해 DNS 요청에 대한 처리를 할 수 있다.

Route 53에서는 레코드를 생성할 때 라우팅 정책을 지정하며, 이는 DNS 요청에 대한 응답 방식을 말한다.

1. 단순 라우팅(Simple Routing)

   도메인에 대한 하나의 특정 리소스를 지정하며, 레코드에 대한 값은 여러 개를 입력할 수 있으나, 이 중에 하나의 값만 랜덤하게 응답한다.

2. 가중치 기반 라우팅(Weighted Routing)

   도메인에 대한 다수의 리소스를 지정하고 값에 대한 비중을 두고 라우팅을 하는 데, 가중치 값은 0 ~ 255 사이로 지정하여 [대상 가중치 % 전체 가중치 합]을 통해 비중을 부여한다.

3. 지연 시간 기반 라우팅(Latency Routing)

   여러 AWS 리전에 리소스가 있고, 최상의 지연 시간을 제공하는 리전을 라우팅한다. 즉 사용자의 위치에서 가장 가까운 리전과 리소스가 있는 리전과의 지연 시간을 파악후 가장 짧은 지연 대상으로 전달한다.

4. 장애 조치 라우팅 정책(Failover Routing)

   액티브, 패시브 장애 조치를 구성하려는 경우에 사용된다. 레코드 값 중 액티브를 지정하고, 대상으로 라우팅을 하며, 주기적인 상태 확인을 통해 액티브 리소스가 통신이 불가능할 경우 패시브 대상을 액티브 대상으로 변경한다.

5. 지리 위치 라우팅(Geolocation Routing)

   DNS 질의를 하는 사용자의 로컬 DNS 서버의 IP 위치를 기반하여 가장 인접한 리전의 리소르를 대상으로 라우팅한다.

6. 지리 근접 라우팅(Geoproximity Routing)

   지리 위치 라우팅과 동일한 형태의 라우팅 기법을 가지고 있으며, 바이어스라는 값을 조정하여 근접 영역의 영향도를 조정한다.

7. 다중값 응답 라우팅(Multi-value Answer Routing)

   Route53이 DNS 질의에 대해 다수의 값을 반환하도록 구성되어있다.ㅌㄴ
